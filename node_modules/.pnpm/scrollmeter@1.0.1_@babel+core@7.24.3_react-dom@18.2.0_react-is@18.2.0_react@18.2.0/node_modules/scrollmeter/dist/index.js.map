{"version":3,"file":"index.js","sources":["../src/index.tsx"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport styled from 'styled-components';\n\ninterface IStyledScrollMeterDiv {\n  height: number | undefined,\n  top: number | undefined,\n  background: string | undefined\n};\nconst StyledScrollMeterDiv = styled.div<IStyledScrollMeterDiv>`\n  width: 100%;\n  height: ${props => props.height}px;\n  top: ${props => props.top}px;\n  background: ${props => props.background};\n  position: sticky;\n  z-index: 2;\n`;\n\ninterface IScrollMeter {\n  leftColor?: string,\n  rightColor?: string,\n  direction?: string,\n  duration?: number,\n  height?: number,\n  top?: number,\n  debug?: boolean\n};\nconst IScrollMeterDefaults: IScrollMeter = {\n  leftColor: 'rgba(60, 112, 150, 0.9)',\n  rightColor: 'rgba(0, 0, 0, 0.8)',\n  direction: 'right',\n  duration: 20,\n  height: 5,\n  top: 0,\n  debug: false\n};\n\nconst ScrollMeter: React.FC<IScrollMeter> = (props) => {\n  const scrollDiv = useRef<HTMLDivElement>(null);\n  const [timer, setTimer] = useState<any>(null);\n\n  useEffect(() => {\n    window.addEventListener('scroll', () => {\n      if (!timer) {\n        setTimer(setTimeout(function() {\n          setTimer(null);\n          handleScrollMeter();\n        }, props.duration));\n      }\n    });\n  }, []);\n\n  const handleScrollMeter = () => {\n    const windowHeight = window.document.body.getBoundingClientRect().height - window.screen.availHeight + 111;\n    const poz = window.scrollY;\n    const ratio = poz / windowHeight * 100;\n\n    if (scrollDiv.current) {\n      const color = `linear-gradient(to ${props.direction}, ${props.leftColor} ${ratio}%, ${props.rightColor} ${ratio}% ${100 - ratio}%)`;\n      scrollDiv.current.style.background = color;\n      if (props.debug)\n        console.log(`windowHeight: ${windowHeight}, poz: ${poz}, ratio: ${ratio}, color: ${color}`);\n    }\n  };\n\n  return (<StyledScrollMeterDiv ref={scrollDiv} height={props.height} top={props.top} background={props.rightColor} />);\n};\n\nScrollMeter.defaultProps = IScrollMeterDefaults;\n\nexport default ScrollMeter;\n"],"names":["StyledScrollMeterDiv","styled","div","props","height","top","background","IScrollMeterDefaults","leftColor","rightColor","direction","duration","debug","ScrollMeter","scrollDiv","useRef","useState","timer","setTimer","useEffect","window","addEventListener","setTimeout","handleScrollMeter","windowHeight","document","body","getBoundingClientRect","screen","availHeight","poz","scrollY","ratio","current","color","style","console","log","React","ref","defaultProps"],"mappings":";;;;;;;;;;;;;;;;AAQA,IAAMA,oBAAoB,GAAGC,MAAM,CAACC,GAAV,yLAEd,UAAAC,KAAK;AAAA,SAAIA,KAAK,CAACC,MAAV;AAAA,CAFS,EAGjB,UAAAD,KAAK;AAAA,SAAIA,KAAK,CAACE,GAAV;AAAA,CAHY,EAIV,UAAAF,KAAK;AAAA,SAAIA,KAAK,CAACG,UAAV;AAAA,CAJK,CAA1B;AAkBA,IAAMC,oBAAoB,GAAiB;AACzCC,EAAAA,SAAS,EAAE,yBAD8B;AAEzCC,EAAAA,UAAU,EAAE,oBAF6B;AAGzCC,EAAAA,SAAS,EAAE,OAH8B;AAIzCC,EAAAA,QAAQ,EAAE,EAJ+B;AAKzCP,EAAAA,MAAM,EAAE,CALiC;AAMzCC,EAAAA,GAAG,EAAE,CANoC;AAOzCO,EAAAA,KAAK,EAAE;AAPkC,CAA3C;;AAUA,IAAMC,WAAW,GAA2B,SAAtCA,WAAsC,CAACV,KAAD;AAC1C,MAAMW,SAAS,GAAGC,YAAM,CAAiB,IAAjB,CAAxB;;AACA,kBAA0BC,cAAQ,CAAM,IAAN,CAAlC;AAAA,MAAOC,KAAP;AAAA,MAAcC,QAAd;;AAEAC,EAAAA,eAAS,CAAC;AACRC,IAAAA,MAAM,CAACC,gBAAP,CAAwB,QAAxB,EAAkC;AAChC,UAAI,CAACJ,KAAL,EAAY;AACVC,QAAAA,QAAQ,CAACI,UAAU,CAAC;AAClBJ,UAAAA,QAAQ,CAAC,IAAD,CAAR;AACAK,UAAAA,iBAAiB;AAClB,SAHkB,EAGhBpB,KAAK,CAACQ,QAHU,CAAX,CAAR;AAID;AACF,KAPD;AAQD,GATQ,EASN,EATM,CAAT;;AAWA,MAAMY,iBAAiB,GAAG,SAApBA,iBAAoB;AACxB,QAAMC,YAAY,GAAGJ,MAAM,CAACK,QAAP,CAAgBC,IAAhB,CAAqBC,qBAArB,GAA6CvB,MAA7C,GAAsDgB,MAAM,CAACQ,MAAP,CAAcC,WAApE,GAAkF,GAAvG;AACA,QAAMC,GAAG,GAAGV,MAAM,CAACW,OAAnB;AACA,QAAMC,KAAK,GAAGF,GAAG,GAAGN,YAAN,GAAqB,GAAnC;;AAEA,QAAIV,SAAS,CAACmB,OAAd,EAAuB;AACrB,UAAMC,KAAK,2BAAyB/B,KAAK,CAACO,SAA/B,UAA6CP,KAAK,CAACK,SAAnD,SAAgEwB,KAAhE,WAA2E7B,KAAK,CAACM,UAAjF,SAA+FuB,KAA/F,WAAyG,MAAMA,KAA/G,QAAX;AACAlB,MAAAA,SAAS,CAACmB,OAAV,CAAkBE,KAAlB,CAAwB7B,UAAxB,GAAqC4B,KAArC;AACA,UAAI/B,KAAK,CAACS,KAAV,EACEwB,OAAO,CAACC,GAAR,oBAA6Bb,YAA7B,eAAmDM,GAAnD,iBAAkEE,KAAlE,iBAAmFE,KAAnF;AACH;AACF,GAXD;;AAaA,SAAQI,4BAAA,CAACtC,oBAAD;AAAsBuC,IAAAA,GAAG,EAAEzB;AAAWV,IAAAA,MAAM,EAAED,KAAK,CAACC;AAAQC,IAAAA,GAAG,EAAEF,KAAK,CAACE;AAAKC,IAAAA,UAAU,EAAEH,KAAK,CAACM;GAA9F,CAAR;AACD,CA7BD;;AA+BAI,WAAW,CAAC2B,YAAZ,GAA2BjC,oBAA3B;;;;"}